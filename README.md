# Infrastructure Task

## Overview

This project processes customer order data from a CSV file and performs the following tasks:

* Compute the total revenue generated by the online store for each month.

* Compute the total revenue generated by each product.

* Compute the total revenue generated by each customer.

* Identify the top 10 customers by revenue generated.

  

## Project Structure

infrastructure_project/
├── Dockerfile

├── Dockerfile.tests

├── README.md

├── docker-compose.yml

├── main.py

├── orders_1500.csv

├── requirements.txt

└── test_main.py



## Explanation for the above files

* **Dockerfile**: Defines the Docker image for the main application, including the base image, working directory, dependencies installation, and command to run the application.

* **Dockerfile.tests**: Similar to the main Dockerfile, but configured to run unit tests.

* **docker-compose.yml**: Orchestrates the multi-container Docker application, specifying the services for the main application and tests.

* **main.py**: The primary Python script that reads the CSV file and performs the data processing tasks such as calculating revenues and identifying top customers.

* **orders_1500.csv**: The dataset used for processing. It contains order data with columns like order_id, customer_id, order_date, product_id, product_name, product_price, and quantity.

* **requirements.txt**: Lists the Python libraries required to run the application, such as pandas.

* **test_main.py**: Contains unit tests to validate the functionality of the main script.



## Local Setup (OPTIONAL)

1. Create a virtual environment:
    ```bash
    python -m venv venv
    ```
2. Activate the virtual environment:
    ```bash
    source venv/bin/activate  # On Windows use `venv\Scripts\activate`
    ```
3. Install dependencies:
    ```bash
    pip install -r requirements.txt
    ```
4. Run the application:
    ```bash
    python main.py
    ```
5. Run the tests:
    ```bash
    python -m unittest discover
    ```
    

## Docker Setup (ACTUAL SETUP)
Once you have set up your directory with the above file structure, you can proceed with the Docker setup.

1. **Build the Docker containers**:
    ```bash
    docker-compose build
    ```
    This command builds the Docker images for both the application and the tests as defined in the `docker-compose.yml` file.
    
2. **Run the application**:
    ```bash
    docker-compose up app
    ```
    This command starts the application container, which runs the main script and processes the data.

3. **Run the tests**:
    ```bash
    docker-compose up tests
    ```
    This command starts the test container, which runs the unit tests to ensure the application's functionality is correct.


     
## Requirements
* Docker
* Python 3.9 or higher
* pandas library
  

## Usage
1. Load the data
    * The data is loaded from a CSV file named `orders_1500.csv`.
2. Calculate total revenue**:
    * Total revenue is calculated per order by multiplying the product price by the quantity.
3. Compute monthly revenue:
    * Monthly revenue is computed by summing the total revenue for each month.
4. Compute product revenue:
    * Product revenue is computed by summing the total revenue for each product.
5. Compute customer revenue:
    * Customer revenue is computed by summing the total revenue for each customer.
6. Identify top 10 customers:
    * The top 10 customers are identified based on the total revenue generated.


## Demo Video (link)
https://drive.google.com/file/d/1jIUDdYQN993ZaYHjRdUb0uSsfkyJ86yA/view?usp=sharing


## Conclusion

Thank you for checking out this project.

